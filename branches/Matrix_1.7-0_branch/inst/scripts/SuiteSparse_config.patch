diff -ruN src/SuiteSparse/SuiteSparse_config/Makefile src/SuiteSparse-patched/SuiteSparse_config/Makefile
--- src/SuiteSparse/SuiteSparse_config/Makefile	1969-12-31 19:00:00
+++ src/SuiteSparse-patched/SuiteSparse_config/Makefile	2023-11-03 13:50:00
@@ -0,0 +1,16 @@
+sources = SuiteSparse_config.c
+objects = $(sources:.c=.o)
+archive = SuiteSparse_config.a
+
+all : $(archive)
+
+$(archive) : $(objects)
+	rm -f $@
+	$(AR) -cr $@ $(objects)
+	$(RANLIB) $@
+
+.c.o :
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $*.o
+
+clean :
+	@rm -f $(objects) $(archive)
diff -ruN src/SuiteSparse/SuiteSparse_config/SuiteSparse_config.c src/SuiteSparse-patched/SuiteSparse_config/SuiteSparse_config.c
--- src/SuiteSparse/SuiteSparse_config/SuiteSparse_config.c	2023-10-16 14:57:34
+++ src/SuiteSparse-patched/SuiteSparse_config/SuiteSparse_config.c	2023-11-03 13:50:00
@@ -73,8 +73,8 @@
             /* MATLAB mexFunction: */
             mexPrintf,
         #else
-            /* standard ANSI C: */
-            printf,
+#include <R_ext/Print.h>
+            Rprintf,
         #endif
     #else
         /* printf is disabled */
diff -ruN src/SuiteSparse/SuiteSparse_config/SuiteSparse_config.h src/SuiteSparse-patched/SuiteSparse_config/SuiteSparse_config.h
--- src/SuiteSparse/SuiteSparse_config/SuiteSparse_config.h	2023-10-16 14:57:34
+++ src/SuiteSparse-patched/SuiteSparse_config/SuiteSparse_config.h	2023-11-03 13:50:00
@@ -627,6 +627,19 @@
 
 #if defined ( SUITESPARSE_BLAS_DEFINITIONS )
 
+#ifndef USE_FC_LEN_T
+# define USE_FC_LEN_T
+#endif
+#include <Rconfig.h>
+
+#ifdef FC_LEN_T
+# define FCLEN ,FC_LEN_T
+# define FCONE ,(FC_LEN_T)1
+#else
+# define FCLEN
+# define FCONE
+#endif
+
 void SUITESPARSE_BLAS_DGEMV         // Y = alpha*A*x + beta*Y
 (
     // input:
@@ -642,7 +655,7 @@
     // input/output:
     double *Y,
     // input:
-    const SUITESPARSE_BLAS_INT *incy
+    const SUITESPARSE_BLAS_INT *incy FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_dgemv(trans,m,n,alpha,A,lda,X,incx,beta,Y,incy,ok)   \
@@ -655,7 +668,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_DGEMV (trans, &M_blas_int, &N_blas_int, alpha, A,    \
-            &LDA_blas_int, X, &INCX_blas_int, beta, Y, &INCY_blas_int) ;      \
+            &LDA_blas_int, X, &INCX_blas_int, beta, Y, &INCY_blas_int FCONE) ; \
     }                                                                         \
 }
 
@@ -674,7 +687,7 @@
     // input/output:
     void *Y,
     // input:
-    const SUITESPARSE_BLAS_INT *incy
+    const SUITESPARSE_BLAS_INT *incy FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_zgemv(trans,m,n,alpha,A,lda,X,incx,beta,Y,incy,ok)   \
@@ -687,7 +700,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_ZGEMV (trans, &M_blas_int, &N_blas_int, alpha, A,    \
-            &LDA_blas_int, X, &INCX_blas_int, beta, Y, &INCY_blas_int) ;      \
+            &LDA_blas_int, X, &INCX_blas_int, beta, Y, &INCY_blas_int FCONE) ; \
     }                                                                         \
 }
 
@@ -703,7 +716,7 @@
     // input/output:
     double *X,
     // input:
-    const SUITESPARSE_BLAS_INT *incx
+    const SUITESPARSE_BLAS_INT *incx FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_dtrsv(uplo,trans,diag,n,A,lda,X,incx,ok)             \
@@ -714,7 +727,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_DTRSV (uplo, trans, diag, &N_blas_int, A,            \
-            &LDA_blas_int, X, &INCX_blas_int) ;                               \
+            &LDA_blas_int, X, &INCX_blas_int FCONE FCONE FCONE) ;             \
     }                                                                         \
 }
 
@@ -730,7 +743,7 @@
     // input/output:
     void *X,
     // input:
-    const SUITESPARSE_BLAS_INT *incx
+    const SUITESPARSE_BLAS_INT *incx FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_ztrsv(uplo,trans,diag,n,A,lda,X,incx,ok)             \
@@ -741,7 +754,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_ZTRSV (uplo, trans, diag, &N_blas_int, A,            \
-            &LDA_blas_int, X, &INCX_blas_int) ;                               \
+            &LDA_blas_int, X, &INCX_blas_int FCONE FCONE FCONE) ;             \
     }                                                                         \
 }
 
@@ -760,7 +773,7 @@
     // input/output:
     double *B,
     // input:
-    const SUITESPARSE_BLAS_INT *ldb
+    const SUITESPARSE_BLAS_INT *ldb FCLEN FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_dtrsm(side,uplo,transa,diag,m,n,alpha,A,lda,B,ldb,ok)\
@@ -772,7 +785,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_DTRSM (side, uplo, transa, diag, &M_blas_int,        \
-            &N_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int) ;         \
+            &N_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int FCONE FCONE FCONE FCONE) ; \
     }                                                                         \
 }
 
@@ -791,7 +804,7 @@
     // input/output:
     void *B,
     // input:
-    const SUITESPARSE_BLAS_INT *ldb
+    const SUITESPARSE_BLAS_INT *ldb FCLEN FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_ztrsm(side,uplo,transa,diag,m,n,alpha,A,lda,B,ldb,ok)\
@@ -803,7 +816,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_ZTRSM (side, uplo, transa, diag, &M_blas_int,        \
-            &N_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int) ;         \
+            &N_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int FCONE FCONE FCONE FCONE) ; \
     }                                                                         \
 }
 
@@ -824,7 +837,7 @@
     // input/output:
     double *C,
     // input:
-    const SUITESPARSE_BLAS_INT *ldc
+    const SUITESPARSE_BLAS_INT *ldc FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_dgemm(transa,transb,m,n,k,alpha,A,lda,B,ldb,beta,    \
@@ -840,7 +853,7 @@
     {                                                                         \
         SUITESPARSE_BLAS_DGEMM (transa, transb, &M_blas_int, &N_blas_int,     \
             &K_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int, beta, C,  \
-            &LDC_blas_int) ;                                                  \
+            &LDC_blas_int FCONE FCONE) ;                                      \
     }                                                                         \
 }
 
@@ -861,7 +874,7 @@
     // input/output:
     void *C,
     // input:
-    const SUITESPARSE_BLAS_INT *ldc
+    const SUITESPARSE_BLAS_INT *ldc FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_zgemm(transa,transb,m,n,k,alpha,A,lda,B,ldb,beta,    \
@@ -877,7 +890,7 @@
     {                                                                         \
         SUITESPARSE_BLAS_ZGEMM (transa, transb, &M_blas_int, &N_blas_int,     \
             &K_blas_int, alpha, A, &LDA_blas_int, B, &LDB_blas_int, beta, C,  \
-            &LDC_blas_int) ;                                                  \
+            &LDC_blas_int FCONE FCONE) ;                                      \
     }                                                                         \
 }
 
@@ -895,7 +908,7 @@
     // input/output:
     double *C,
     // input:
-    const SUITESPARSE_BLAS_INT *ldc
+    const SUITESPARSE_BLAS_INT *ldc FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_dsyrk(uplo,trans,n,k,alpha,A,lda,beta,C,ldc,ok)      \
@@ -907,7 +920,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_DSYRK (uplo, trans, &N_blas_int, &K_blas_int, alpha, \
-            A, &LDA_blas_int, beta, C, &LDC_blas_int) ;                       \
+            A, &LDA_blas_int, beta, C, &LDC_blas_int FCONE FCONE) ;           \
     }                                                                         \
 }
 
@@ -925,7 +938,7 @@
     // input/output:
     void *C,
     // input:
-    const SUITESPARSE_BLAS_INT *ldc
+    const SUITESPARSE_BLAS_INT *ldc FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_BLAS_zherk(uplo,trans,n,k,alpha,A,lda,beta,C,ldc,ok)      \
@@ -937,7 +950,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_BLAS_ZHERK (uplo, trans, &N_blas_int, &K_blas_int, alpha, \
-            A, &LDA_blas_int, beta, C, &LDC_blas_int) ;                       \
+            A, &LDA_blas_int, beta, C, &LDC_blas_int FCONE FCONE) ;           \
     }                                                                         \
 }
 
@@ -951,7 +964,7 @@
     // input:
     const SUITESPARSE_BLAS_INT *lda,
     // output:
-    SUITESPARSE_BLAS_INT *info
+    SUITESPARSE_BLAS_INT *info FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_dpotrf(uplo,n,A,lda,info,ok)                       \
@@ -963,7 +976,7 @@
     {                                                                         \
         SUITESPARSE_BLAS_INT LAPACK_Info = -999 ;                             \
         SUITESPARSE_LAPACK_DPOTRF (uplo, &N_blas_int, A, &LDA_blas_int,       \
-          &LAPACK_Info) ;                                                     \
+          &LAPACK_Info FCONE) ;                                               \
         info = (Int) LAPACK_Info ;                                            \
     }                                                                         \
 }
@@ -978,7 +991,7 @@
     // input:
     const SUITESPARSE_BLAS_INT *lda,
     // output:
-    SUITESPARSE_BLAS_INT *info
+    SUITESPARSE_BLAS_INT *info FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_zpotrf(uplo,n,A,lda,info,ok)                       \
@@ -990,7 +1003,7 @@
     {                                                                         \
         SUITESPARSE_BLAS_INT LAPACK_Info = -999 ;                             \
         SUITESPARSE_LAPACK_ZPOTRF (uplo, &N_blas_int, A, &LDA_blas_int,       \
-            &LAPACK_Info) ;                                                   \
+            &LAPACK_Info FCONE) ;                                             \
         info = LAPACK_Info ;                                                  \
     }                                                                         \
 }
@@ -1110,7 +1123,7 @@
     // output:
     double *T,
     // input:
-    const SUITESPARSE_BLAS_INT *ldt
+    const SUITESPARSE_BLAS_INT *ldt FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_dlarft(direct,storev,n,k,V,ldv,Tau,T,ldt,ok)       \
@@ -1122,7 +1135,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_LAPACK_DLARFT (direct, storev, &N_blas_int, &K_blas_int,  \
-            V, &LDV_blas_int, Tau, T, &LDT_blas_int) ;                        \
+            V, &LDV_blas_int, Tau, T, &LDT_blas_int FCONE FCONE) ;            \
     }                                                                         \
 }
 
@@ -1139,7 +1152,7 @@
     // output:
     void *T,
     // input:
-    const SUITESPARSE_BLAS_INT *ldt
+    const SUITESPARSE_BLAS_INT *ldt FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_zlarft(direct,storev,n,k,V,ldv,Tau,T,ldt,ok)       \
@@ -1151,7 +1164,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_LAPACK_ZLARFT (direct, storev, &N_blas_int, &K_blas_int,  \
-            V, &LDV_blas_int, Tau, T, &LDT_blas_int) ;                        \
+            V, &LDV_blas_int, Tau, T, &LDT_blas_int FCONE FCONE) ;            \
     }                                                                         \
 }
 
@@ -1176,7 +1189,7 @@
     // workspace:
     double *Work,
     // input:
-    const SUITESPARSE_BLAS_INT *ldwork
+    const SUITESPARSE_BLAS_INT *ldwork FCLEN FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_dlarfb(side,trans,direct,storev,m,n,k,V,ldv,T,ldt, \
@@ -1193,7 +1206,7 @@
     {                                                                         \
         SUITESPARSE_LAPACK_DLARFB (side, trans, direct, storev, &M_blas_int,  \
             &N_blas_int, &K_blas_int, V, &LDV_blas_int, T, &LDT_blas_int, C,  \
-            &LDC_blas_int, Work, &LDWORK_blas_int) ;                          \
+            &LDC_blas_int, Work, &LDWORK_blas_int FCONE FCONE FCONE FCONE) ;  \
     }                                                                         \
 }
 
@@ -1218,7 +1231,7 @@
     // workspace:
     void *Work,
     // input:
-    const SUITESPARSE_BLAS_INT *ldwork
+    const SUITESPARSE_BLAS_INT *ldwork FCLEN FCLEN FCLEN FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_zlarfb(side,trans,direct,storev,m,n,k,V,ldv,T,ldt, \
@@ -1235,7 +1248,7 @@
     {                                                                         \
         SUITESPARSE_LAPACK_ZLARFB (side, trans, direct, storev, &M_blas_int,  \
             &N_blas_int, &K_blas_int, V, &LDV_blas_int, T, &LDT_blas_int, C,  \
-            &LDC_blas_int, Work, &LDWORK_blas_int) ;                          \
+            &LDC_blas_int, Work, &LDWORK_blas_int FCONE FCONE FCONE FCONE) ;  \
     }                                                                         \
 }
 
@@ -1339,7 +1352,7 @@
     // input:
     const SUITESPARSE_BLAS_INT *ldc,
     // workspace:
-    double *Work
+    double *Work FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_dlarf(side,m,n,V,incv,tau,C,ldc,Work,ok)           \
@@ -1351,7 +1364,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_LAPACK_DLARF (side, &M_blas_int, &N_blas_int, V,          \
-            &INCV_blas_int, tau, C, &LDC_blas_int, Work) ;                    \
+            &INCV_blas_int, tau, C, &LDC_blas_int, Work FCONE) ;              \
     }                                                                         \
 }
 
@@ -1369,7 +1382,7 @@
     // input:
     const SUITESPARSE_BLAS_INT *ldc,
     // workspace:
-    void *Work
+    void *Work FCLEN
 ) ;
 
 #define SUITESPARSE_LAPACK_zlarf(side,m,n,V,incv,tau,C,ldc,Work,ok)           \
@@ -1381,7 +1394,7 @@
     if (ok)                                                                   \
     {                                                                         \
         SUITESPARSE_LAPACK_ZLARF (side, &M_blas_int, &N_blas_int, V,          \
-            &INCV_blas_int, tau, C, &LDC_blas_int, Work) ;                    \
+            &INCV_blas_int, tau, C, &LDC_blas_int, Work FCONE) ;              \
     }                                                                         \
 }
 
